!function e(n,t,r){function o(a,c){if(!t[a]){if(!n[a]){var l="function"==typeof require&&require;if(!c&&l)return l(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var u=t[a]={exports:{}};n[a][0].call(u.exports,function(e){var t=n[a][1][e];return o(t?t:e)},u,u.exports,e,n,t,r)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,t){"use strict";var r=e("./dragularModule");r.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(n,t,r){function o(e){try{return JSON.parse(e)}catch(n){return void 0}}var i=n[r.dragular]||o(r.dragular);i&&i.containersModel&&"string"==typeof i.containersModel&&(i.containersModel=n.$eval(i.containersModel)),e(t[0],i)}}}])},{"./dragularModule":2}],2:[function(e,n,t){"use strict";n.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,n,t){"use strict";var r=e("./dragularModule");r.factory("dragularService",["$rootScope","$timeout",function(e,n){function t(e,n,t,r){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i=angular.element(e);"wheel"!==t&&i[n](o[t],r),i[n](t,r)}function r(){return!1}function o(){return!0}function i(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}return e.nextElementSibling||n()}function a(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function c(e){var n=E[e];return n?n.lastIndex=0:E[e]=n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),n}function l(e,n){var t=e.className;t.length?c(n).test(t)||(e.className+=" "+n):e.className=n}function s(e,n){e.className=e.className.replace(c(n)," ").trim()}function u(e,n){return(" "+e.className+" ").indexOf(" "+n+" ")>-1}function d(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function f(e,n){var t=d(n),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in t)&&r[e]in t&&(e=r[e]),t[e]}function p(e){return e.width||e.right-e.left}function g(e){return e.height||e.bottom-e.top}function v(e,n){return Array.prototype.indexOf.call(angular.element(n).children(),e)}function m(e,n){e.dispatchEvent?e.dispatchEvent(n):e.fireEvent("on"+n.eventType,n)}var h,y={},x={},E={};return function(c,d){function E(e,n,t,r){n[t]||(n[t]=[]),Array.prototype.push.apply(n[t],r),e[t]=n[t]}function M(e){if(Array.isArray(e))return e;if(e.length){var n,t=e.length,r=[];for(n=0;t>n;n++)r.push(e[n]);return r}return[e]}function O(e){return function(n){var t=Array.isArray(n)?n:M(n);t.forEach(function(n){$e.nameSpace?angular.forEach($e.nameSpace,function(t){var r;"add"===e?(Ce[t].push(n),console.warn&&void 0):(r=Ce[t].indexOf(n),Ce[t].splice(r,1),$e.containersModel&&Te[t].splice(r,1),console.warn&&void 0)}):"add"===e?(Ce.push(n),console.warn&&void 0):(Ce.splice(Ce.indexOf(n),1),console.warn&&void 0)})}}function w(e){return-1!==Ne.containers.indexOf(e)||$e.isContainer(e)}function b(e){var n;for(n in Ne.containers)if(Ne.containers.hasOwnProperty(n)&&-1!==Ne.containers[n].indexOf(e))return!0;return!1}function S(e){var n=e?"off":"on";t(be,n,"mouseup",Y),c.forEach(function(e){t(e,"on","mousedown",T)})}function C(){S(!0),Ne.removeContainer(c),Y({})}function T(e){e=e||window.event;var t=e.target;if(!(0!==e.which&&1!==e.which||e.metaKey||e.ctrlKey)&&$(t)===!0){if(!$e.direction){var r=t.parentElement,o=r.offsetHeight,i=r.offsetWidth,a=t.clientHeight,c=t.clientWidth;$e.direction=i/c>o/a?"horizontal":"vertical"}var l=_(G);ne=f("pageX",e)-l.left,te=f("pageY",e)-l.top,ie=f("clientX",e),ae=f("clientY",e),$e.boundingBox&&(re=f("pageX",e)-l.right,oe=f("pageY",e)-l.bottom),"number"==typeof $e.delay?he=n(function(){A(e)},$e.delay):A(e),e.preventDefault()}}function A(e){l(ve||G,$e.classes.transit),U(),h.style.left=ie-ne+"px",h.style.top=ae-te+"px",R(e)}function $(e){var n=e;if(!(Ne.dragging&&h||ye(e))){for(;e.parentElement&&!ye(e.parentElement);){if($e.invalid(e,n))return;if(e=e.parentElement,!e)return}var t=e.parentElement;if(t&&t&&!$e.invalid(e,n)&&$e.moves(e,t,n,V,Q)){if(B(),$e.containersModel){var r=c.indexOf(t),o=v(e,t);de=fe=o,Q=$e.containersModel[r],Z=Q,V=Q[o],$e.copy&&(me=angular.copy(V))}return $e.copy&&(ve=e.cloneNode(!0),$e.scope&&$e.scope.$emit("cloned",ve,e,me,V)),J=t,G=e,se=ue=i(e),Ne.dragging=!0,$e.scope&&$e.scope.$emit("drag",G,J),!0}}}function N(e){return"A"===e.tagName||"BUTTON"===e.tagName}function B(){if(Ne.dragging){var e=ve||G;X(e,e.parentElement)}}function Y(e){if(Ne.dragging){e=e||window.event,ie=f("clientX",e),ae=f("clientY",e);var n=ve||G,t=I(h,ie,ae),r=L(t,ie,ae);!r||$e.copy!==!1&&r===J?$e.removeOnSpill?D():j():X(n,r),xe=null,$e.dragOverClasses&&pe&&(s(pe,ge),pe=null),$e.scope&&$e.scope.$emit("release",n,J)}}function X(e,n){$e.scope&&k(n)?$e.scope.$emit("cancel",e,J,me||V,Q,Z):$e.scope&&$e.scope.$emit("drop",e,n,J,me||V,Q,Z),H()}function D(){if(Ne.dragging){var e,n=ve||G,t=n.parentElement;$e.containersModel?(e=me||V,Z.splice(Z.indexOf(e),1)):t&&t.removeChild(n),$e.scope&&$e.scope.$emit($e.copy?"cancel":"remove",n,t,e,Q,Z),H()}}function j(e){if(Ne.dragging){var n=arguments.length>0?e:$e.revertOnSpill,t=ve||G,r=t.parentElement;r===J&&$e.copy&&($e.containersModel?Z.splice(Z.indexOf(me),1,me):r.removeChild(ve));var o=k(r);o===!1&&$e.copy===!1&&n&&($e.containersModel?(ee=Z,Z=Q,q(de)):J.insertBefore(t,se)),$e.scope&&(o||n)?$e.scope.$emit("cancel",t,J):$e.scope&&$e.scope.$emit("drop",t,r,J),H()}}function H(){var e=ve||G;z(),e&&s(e,$e.classes.transit),he&&n.cancel(he),Ne.dragging=!1,$e.scope&&($e.scope.$emit("dragend",e),$e.scope.$emit("out",e,Se,J)),J=G=ve=se=ue=Q=null,V=me=de=fe=he=Se=null}function k(e,n){var t=n||(h?ue:i(G||ve));return e===J&&t===se}function L(e,n,t){function r(){var r=!1;if(ye(o)){xe=o;var i=F(o,e),a=K(o,i,n,t),c=k(o,a);if(r=c?!0:$e.accepts(G,o,J,a,V,Q),r&&$e.containersModel)if(ee=Z,$e.nameSpace){for(var d in Ne.containers)if(Ne.containers.hasOwnProperty(d)&&-1!==Ne.containers[d].indexOf(o)){ee=Z,Z=Te[d][Ne.containers[d].indexOf(o)];break}}else Z=Te[Ne.containers.indexOf(o)]}return $e.dragOverClasses&&u(o,$e.classes.overActive)&&o!==pe&&(pe&&s(pe,ge),ge=r?$e.classes.overAccepts:$e.classes.overDeclines,l(o,ge),pe=o),r}for(var o=e;o&&!r();)o=o.parentElement;return o}function R(n){function t(e){$e.scope.$emit(e,d,Se,J)}function r(){y&&t("over")}function o(){Se&&t("out")}if(h){n=n||window.event,ie=f("clientX",n),ae=f("clientY",n);var a,c,l,s=ie-ne,u=ae-te;$e.boundingBox&&(a=f("pageX",n),c=f("pageY",n),l=_($e.boundingBox)),$e.lockY||(!$e.boundingBox||a>l.left+ne&&a<l.right+re?h.style.left=s+"px":$e.boundingBox&&(h.style.left=a<l.left+ne?ie-(a-l.left)+"px":ie-ce-(a-l.right)+"px")),$e.lockX||(!$e.boundingBox||c>l.top+te&&c<l.bottom+oe?h.style.top=u+"px":$e.boundingBox&&(h.style.top=c<l.top+te?ae-(c-l.top)+"px":ae-le-(c-l.bottom)+"px"));var d=ve||G,p=I(h,ie,ae),g=L(p,ie,ae),y=null!==g&&g!==Se;if(p!==Oe&&(m(p,Ee),Oe&&m(Oe,Me),Oe=p),(y||null===g)&&($e.scope?(o(),Se=g,r()):Se=g),g===J&&$e.copy)return void(!$e.containersModel&&d.parentElement?d.parentElement.removeChild(d):$e.containersModel&&-1!==ee.indexOf(me)&&e.$applyAsync(function(){ee.splice(ee.indexOf(me),1)}));var x,E,M=F(g,p);if(null!==M)x=K(g,M,ie,ae),$e.containersModel&&(E=x?v(x,g):null);else{if($e.revertOnSpill!==!0||$e.copy)return void(!$e.copy&&$e.removeOnSpill!==!0||null===d.parentElement||($e.containersModel?e.$applyAsync(function(){Z.splice(E,1)}):d.parentElement.removeChild(d)));x=se,g=J,$e.containersModel&&(E=de,ee=Z,Z=Q)}(null===x||x!==d&&x!==i(d)&&x!==ue)&&(ue=x,$e.containersModel?q(E):g.insertBefore(d,x),$e.scope&&$e.scope.$emit("shadow",d,g))}}function q(n){e.$applyAsync(function(){if(ee===Z){null===n&&(n=Z.length);var e=n>fe?n-1:n;Z.splice(e,0,ee.splice(fe,1)[0]),fe=e}else null===n&&(n=Z.length-1),$e.copy&&ee===Q||ee.splice(fe,1),$e.copy&&-1!==Z.indexOf(me)||(Z.splice(n,0,me||V),fe=n)})}function P(e){if(xe){var n=xe.scrollTop;xe.scrollTop+=e.deltaY,n!==xe.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function U(){if(!h){var e=G.getBoundingClientRect();h=G.cloneNode(!0),ce=e.width,le=e.height,h.style.width=p(e)+"px",h.style.height=g(e)+"px",s(h,$e.classes.transit),l(h,$e.classes.mirror),$e.mirrorContainer.appendChild(h),t(be,"on","mousemove",R),l(we,$e.classes.unselectable),t(h,"on","wheel",P),$e.scope&&$e.scope.$emit("cloned",h,G)}}function z(){h&&(s(we,$e.classes.unselectable),t(be,"off","mousemove",R),t(h,"off","wheel",P),h.parentElement.removeChild(h),h=null)}function F(e,n){for(var t=n;t!==e&&t.parentElement!==e;)t=t.parentElement;return t===be?null:t}function K(e,n,t,r){function o(){var n,o,i,a=e.children.length;for(n=0;a>n;n++){if(o=e.children[n],i=o.getBoundingClientRect(),l&&i.left>t)return o;if(!l&&i.top>r)return o}return null}function a(){var e=n.getBoundingClientRect();return c(l?t>e.left+p(e)/2:r>e.top+g(e)/2)}function c(e){return e?i(n):n}var l="horizontal"===$e.direction,s=n!==e?a():o();return s}function W(e,n){return"undefined"!=typeof window[n]?window[n]:be.clientHeight?be[e]:we[e]}function _(e){var n=e.getBoundingClientRect(),t=W("scrollTop","pageYOffset"),r=W("scrollLeft","pageXOffset");return{left:n.left+r,right:n.right+r,top:n.top+t,bottom:n.bottom+t}}function I(e,n,t){if(!n&&!t)return null;var r,o=e||{},i=o.className;return o.className+=" "+$e.classes.hide,r=document.elementFromPoint(n,t),o.className=i,r}1!==arguments.length||Array.isArray(c)||angular.isElement(c)||c[0]||(d=c,c=[]);var J,G,Q,V,Z,ee,ne,te,re,oe,ie,ae,ce,le,se,ue,de,fe,pe,ge,ve,me,he,ye,xe,Ee,Me,Oe,we=document.body,be=document.documentElement,Se=null,Ce={},Te={},Ae={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit",overActive:"gu-over-active",overAccepts:"gu-over-accept",overDeclines:"gu-over-decline"},$e={classes:Ae,containers:!1,moves:o,accepts:o,isContainer:r,copy:!1,delay:!1,invalid:N,revertOnSpill:!1,removeOnSpill:!1,dragOverClasses:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1};a($e.boundingBox)||($e.boundingBox=null),d&&d.classes&&(angular.extend(Ae,d.classes),angular.extend(d.classes,Ae)),angular.extend($e,d),$e.delay===!0&&($e.delay=300),void 0===$e.mirrorContainer&&($e.mirrorContainer=document.body),c=$e.containers||(c?M(c):[]),$e.containers&&(c=M(c)),$e.containersModel&&($e.containersModel=Array.isArray($e.containersModel[0])?$e.containersModel:[$e.containersModel]),$e.nameSpace?(Array.isArray($e.nameSpace)||($e.nameSpace=[$e.nameSpace]),$e.nameSpace.forEach(function(e){E(Ce,y,e,c),$e.containersModel&&E(Te,x,e,$e.containersModel)}),ye=b):(Ce=c,ye=w,$e.containersModel&&(Te=$e.containersModel)),S(),document.createEvent?(Ee=document.createEvent("HTMLEvents"),Ee.initEvent("dragularenter",!0,!0),Me=document.createEvent("HTMLEvents"),Me.initEvent("dragularleave",!0,!0)):(Ee=document.createEventObject(),Ee.eventType="dragularenter",Me=document.createEventObject(),Me.eventType="dragularleave");var Ne={addContainer:O("add"),removeContainer:O("remove"),containers:Ce,containersModel:Te,start:$,end:B,cancel:j,remove:D,destroy:C,dragging:!1};return Ne}}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map